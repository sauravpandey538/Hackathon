"use strict";(()=>{var e={};e.id=118,e.ids=[118],e.modules={8802:e=>{e.exports=require("bcrypt")},5142:e=>{e.exports=require("dotenv")},514:e=>{e.exports=require("knex")},1287:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5085:(e,r,t)=>{t.r(r),t.d(r,{config:()=>l,default:()=>c,routeModule:()=>h});var s={};t.r(s),t.d(s,{default:()=>handler});var a=t(1802),i=t(7153),n=t(6249),o=t(7652),u=t(8802),d=t.n(u);async function handler(e,r){if("GET"===e.method)try{let e=await (0,o.Z)("teachers").select("teachers.*","users.name").join("users","teachers.user_id","users.id");return r.status(200).json(e)}catch(e){return console.error("Error fetching teachers:",e),r.status(500).json({error:"Failed to fetch teachers"})}if("POST"===e.method)try{let{name:t,subject:s,email:a,password:i,faculty:n}=e.body;if(!t||!s||!a||!i)return r.status(400).json({error:"Name, subject, email, and password are required"});let u=await o.Z.transaction(async e=>{let r=await d().hash(i,10),[o]=await e("users").insert({name:t,email:a,password:r,role:"teacher"}).returning("id"),[u]=await e("teachers").insert({user_id:o.id,faculty:n,subject:s}).returning("id"),c=await e("teachers").select("teachers.*","users.name").join("users","teachers.user_id","users.id").where("teachers.id",u.id).first();return c});return r.status(201).json(u)}catch(e){return console.error("Error creating teacher:",e),r.status(500).json({error:"Failed to create teacher"})}return r.setHeader("Allow",["GET","POST"]),r.status(405).end(`Method ${e.method} Not Allowed`)}let c=(0,n.l)(s,"default"),l=(0,n.l)(s,"config"),h=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/teachers",pathname:"/api/teachers",bundlePath:"",filename:""},userland:s})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222,602],()=>__webpack_exec__(5085));module.exports=t})();