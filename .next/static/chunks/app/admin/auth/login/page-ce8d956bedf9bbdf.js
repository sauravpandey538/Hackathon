(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{6179:function(e,t,r){Promise.resolve().then(r.bind(r,7831))},7831:function(e,t,r){"use strict";r.r(t);var n=r(7437),s=r(2265),a=r(4033),o=r(6429),i=r(6582),l=r(3089),u=r(989),c=r(1396),d=r.n(c),m=r(6454),f=r(6855);let h=[{id:1,label:"Email",name:"email",type:"email",placeholder:"Email"},{id:2,label:"Password",name:"password",type:"password",placeholder:"Password"}];t.default=()=>{let[e,t]=(0,s.useState)({email:"",password:""}),[r,c]=(0,s.useState)({email:"",password:""}),g=(0,a.useRouter)(),p=(0,a.useSearchParams)(),{refreshAuth:v}=(0,f.useAuth)(),w=(null==p?void 0:p.get("redirect"))||"/admin/dashboard",handleChange=e=>{c({email:"",password:""});let{name:r,value:n}=e.target;t(e=>({...e,[r]:n}))},handleLogin=async t=>{let r=u.d.safeParse(t);if(r.success){let t=await (0,m.a)("/api/auth/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.success?(await v(),g.push(w)):console.log(t.error)}else{let e={email:"",password:""};r.error.errors.forEach(t=>{e[t.path[0]]=t.message}),c(e)}};return(0,n.jsxs)("div",{className:"container bg-background flex flex-col justify-center items-center w-full",children:[(0,n.jsx)(o._,{className:"text-2xl font-bold",children:"Admin Login"}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 max-w-96 w-full",children:[h.map(t=>(0,n.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,n.jsx)(o._,{htmlFor:t.name,children:t.label}),(0,n.jsx)(i.I,{id:t.name,name:t.name,type:t.type,placeholder:t.placeholder,value:e[t.name],onChange:handleChange}),r[t.name]&&(0,n.jsx)("p",{className:"text-red-500",children:r[t.name]})]},t.id)),(0,n.jsx)(l.z,{className:"w-full",onClick:()=>{handleLogin(e)},children:"Login"})]}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)(d(),{href:"/admin/auth/signup?redirect=".concat(encodeURIComponent(w)),children:["Don't have an account? ",(0,n.jsx)("span",{className:"text-gray-300",children:"Signup"})]})})]})}},3089:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return u}});var n=r(7437),s=r(2265),a=r(7256),o=r(6061),i=r(345);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:u=!1,...c}=e,d=u?a.g7:"button";return(0,n.jsx)(d,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...c})});u.displayName="Button"},6582:function(e,t,r){"use strict";r.d(t,{I:function(){return o}});var n=r(7437),s=r(2265),a=r(345);let o=s.forwardRef((e,t)=>{let{className:r,type:s,...o}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...o})});o.displayName="Input"},6429:function(e,t,r){"use strict";r.d(t,{_:function(){return u}});var n=r(7437),s=r(2265),a=r(6743),o=r(6061),i=r(345);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,i.cn)(l(),r),...s})});u.displayName=a.f.displayName},6855:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var n=r(7437),s=r(2265);let a=(0,s.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[r,o]=(0,s.useState)(!1),[i,l]=(0,s.useState)(null),[u,c]=(0,s.useState)(null),refreshAuth=async()=>{try{let e=await fetch("/api/user/me",{credentials:"include"});if(e.ok){let t=await e.json();o(!0),l(t.name),c(t.email)}else o(!1),l(null),c(null)}catch(e){console.error("Error refreshing auth state:",e),o(!1),l(null),c(null)}},logout=async()=>{try{await fetch("/api/auth/logout",{credentials:"include",method:"POST"}),o(!1),l(null),c(null),window.location.href="/"}catch(e){console.error("Error during logout:",e)}};return(0,s.useEffect)(()=>{refreshAuth()},[]),(0,n.jsx)(a.Provider,{value:{isAuthenticated:r,name:i,email:u,logout,refreshAuth},children:t})}function useAuth(){let e=(0,s.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6454:function(e,t,r){"use strict";r.d(t,{a:function(){return fetchApi}});let fetchApi=async(e,t)=>{try{console.log("url",e);let r=await fetch(e,t);if(!r.ok){let e=await r.json();throw Error(e.message||"API Error: ".concat(r.statusText))}let n=await r.json();return console.log("data",n),{success:!0,data:n}}catch(e){return{success:!1,error:e.message||"Something went wrong"}}}},345:function(e,t,r){"use strict";r.d(t,{cn:function(){return cn}});var n=r(7042),s=r(4769);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},989:function(e,t,r){"use strict";r.d(t,{d:function(){return s},i:function(){return a}});var n=r(4578);let s=n.z.object({email:n.z.string().email({message:"Invalid email"}),password:n.z.string().min(8,{message:"Password must be at least 8 characters long"})}),a=n.z.object({email:n.z.string().email({message:"Invalid email"}),password:n.z.string().min(8,{message:"Password must be at least 8 characters long"}),name:n.z.string().min(3,{message:"Name must be at least 3 characters long"})})}},function(e){e.O(0,[621,396,853,971,472,744],function(){return e(e.s=6179)}),_N_E=e.O()}]);