(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{2369:function(e,t,r){Promise.resolve().then(r.bind(r,4106))},4106:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return AdminDashboard}});var a=r(7437),s=r(2265),n=r(3089),i=r(345);let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});d.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});u.displayName="CardContent";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});h.displayName="CardFooter";var m=r(5367);let TeacherList=e=>{let{teachers:t,onRemove:r}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(l,{children:(0,a.jsx)(o,{children:"Teachers"})}),(0,a.jsx)(u,{children:(0,a.jsx)("div",{className:"space-y-4",children:0===t.length?(0,a.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No teachers added yet"}):t.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.subject})]}),(0,a.jsx)(n.z,{variant:"destructive",size:"icon",onClick:()=>r(e.id),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]},e.id))})})]})};var f=r(6582),x=r(6429),p=r(287),j=r(3523),y=r(9224),v=r(2442);let g=p.fC;p.ZA;let N=p.B4,b=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(p.xz,{ref:t,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[s,(0,a.jsx)(p.JO,{asChild:!0,children:(0,a.jsx)(j.Z,{className:"h-4 w-4 opacity-50"})})]})});b.displayName=p.xz.displayName;let w=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(p.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})});w.displayName=p.u_.displayName;let R=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(p.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})})});R.displayName=p.$G.displayName;let S=s.forwardRef((e,t)=>{let{className:r,children:s,position:n="popper",...d}=e;return(0,a.jsx)(p.h_,{children:(0,a.jsxs)(p.VY,{ref:t,className:(0,i.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...d,children:[(0,a.jsx)(w,{}),(0,a.jsx)(p.l_,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(R,{})]})})});S.displayName=p.VY.displayName;let T=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(p.__,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r),...s})});T.displayName=p.__.displayName;let _=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(p.ck,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(p.wU,{children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(p.eT,{children:s})]})});_.displayName=p.ck.displayName;let C=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(p.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",r),...s})});function TeacherForm(e){let{onAdd:t}=e,[r,i]=(0,s.useState)(""),[c,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[j,y]=(0,s.useState)(""),[v,w]=(0,s.useState)("BIT");return(0,a.jsxs)(d,{children:[(0,a.jsx)(l,{children:(0,a.jsx)(o,{children:"Add New Teacher"})}),(0,a.jsx)(u,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({name:r,subject:c,email:m,password:j,faculty:v}),i(""),h(""),p(""),y("")},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"day",children:"Faculty"}),(0,a.jsxs)(g,{value:v,onValueChange:e=>w(e),children:[(0,a.jsx)(b,{children:(0,a.jsx)(N,{placeholder:"Select day"})}),(0,a.jsxs)(S,{children:[(0,a.jsx)(_,{value:"BCS",children:"BCS"}),(0,a.jsx)(_,{value:"BIT",children:"BIT"}),(0,a.jsx)(_,{value:"BBS",children:"BBS"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"name",children:"Name"}),(0,a.jsx)(f.I,{id:"name",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"subject",children:"Subject"}),(0,a.jsx)(f.I,{id:"subject",value:c,onChange:e=>h(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"email",children:"Email"}),(0,a.jsx)(f.I,{id:"email",type:"email",value:m,onChange:e=>p(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"password",children:"Password"}),(0,a.jsx)(f.I,{id:"password",type:"password",value:j,onChange:e=>y(e.target.value),required:!0})]}),(0,a.jsx)(n.z,{type:"submit",children:"Add Teacher"})]})})]})}function WeeklyRoutine(e){let{teachers:t,routines:r,onAddRoutine:i,onRemoveRoutine:c}=e,[h,m]=(0,s.useState)(""),[p,j]=(0,s.useState)(""),[y,v]=(0,s.useState)(""),[w,R]=(0,s.useState)("");return(0,a.jsxs)(d,{children:[(0,a.jsx)(l,{children:(0,a.jsx)(o,{children:"Add New Routine"})}),(0,a.jsxs)(u,{children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),""!==w&&(i({day:h,time:p,section:y,teacherId:Number(w)}),m(""),j(""),v(""),R(""))},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"day",children:"Day"}),(0,a.jsxs)(g,{value:h,onValueChange:m,children:[(0,a.jsx)(b,{children:(0,a.jsx)(N,{placeholder:"Select day"})}),(0,a.jsxs)(S,{children:[(0,a.jsx)(_,{value:"Monday",children:"Monday"}),(0,a.jsx)(_,{value:"Tuesday",children:"Tuesday"}),(0,a.jsx)(_,{value:"Wednesday",children:"Wednesday"}),(0,a.jsx)(_,{value:"Thursday",children:"Thursday"}),(0,a.jsx)(_,{value:"Friday",children:"Friday"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"time",children:"Time"}),(0,a.jsx)(f.I,{id:"time",type:"time",value:p,onChange:e=>j(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"section",children:"Section"}),(0,a.jsx)(f.I,{id:"section",value:y,onChange:e=>v(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"teacher",children:"Teacher"}),(0,a.jsxs)(g,{value:w.toString(),onValueChange:e=>R(Number(e)),children:[(0,a.jsx)(b,{children:(0,a.jsx)(N,{placeholder:"Select teacher"})}),(0,a.jsx)(S,{children:t.map(e=>(0,a.jsxs)(_,{value:e.id.toString(),children:[e.name," (",e.subject,")"]},e.id))})]})]}),(0,a.jsx)(n.z,{type:"submit",children:"Add Routine"})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Current Routines"}),(0,a.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,a.jsx)(d,{children:(0,a.jsx)(u,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium",children:[e.day," at ",e.time]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Section: ",e.section]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Teacher: ",e.teacher_name," (",e.subject,")"]})]}),(0,a.jsx)(n.z,{variant:"destructive",size:"sm",onClick:()=>c(e.id),children:"Remove"})]})})},e.id))})]})]})]})}C.displayName=p.Z0.displayName;var k=r(7094);let E=k.fC,F=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(k.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});F.displayName=k.aV.displayName;let z=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(k.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});z.displayName=k.xz.displayName;let I=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(k.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});function AdminDashboard(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)([]),[i,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let fetchData=async()=>{try{d(!0);let e=await fetch("/api/teachers");if(!e.ok)throw Error("Failed to fetch teachers");let r=await e.json();t(r);let a=await fetch("/api/routines");if(!a.ok)throw Error("Failed to fetch routines");let s=await a.json();n(s)}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}};fetchData()},[]);let addTeacher=async e=>{try{let r=await fetch("/api/teachers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to add teacher")}let a=await r.json();t(e=>[...e,a])}catch(e){console.error("Error adding teacher:",e)}},removeTeacher=async e=>{try{let r=await fetch("/api/teachers/".concat(e),{method:"DELETE"});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to remove teacher")}t(t=>t.filter(t=>t.id!==e)),n(t=>t.filter(t=>t.teacher_id!==e))}catch(e){console.error("Error removing teacher:",e)}},addRoutine=async e=>{try{let t=await fetch("/api/routines",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to add routine")}let r=await t.json();n(e=>[...e,r])}catch(e){console.error("Error adding routine:",e)}},removeRoutine=async e=>{try{let t=await fetch("/api/routines/".concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to remove routine")}n(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error removing routine:",e)}};return(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,a.jsxs)(E,{defaultValue:"teachers",className:"w-full",children:[(0,a.jsxs)(F,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(z,{value:"teachers",children:"Teachers"}),(0,a.jsx)(z,{value:"routine",children:"Weekly Routine"})]}),(0,a.jsxs)(I,{value:"teachers",className:"space-y-6",children:[(0,a.jsx)(TeacherForm,{onAdd:addTeacher}),(0,a.jsx)(TeacherList,{teachers:e,onRemove:removeTeacher})]}),(0,a.jsx)(I,{value:"routine",children:(0,a.jsx)(WeeklyRoutine,{teachers:e,routines:r,onAddRoutine:addRoutine,onRemoveRoutine:removeRoutine})})]})]})}I.displayName=k.VY.displayName},3089:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return o}});var a=r(7437),s=r(2265),n=r(7256),i=r(6061),d=r(345);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,a.jsx)(u,{className:(0,d.cn)(l({variant:s,size:i,className:r})),ref:t,...c})});o.displayName="Button"},6582:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(7437),s=r(2265),n=r(345);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},6429:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var a=r(7437),s=r(2265),n=r(6743),i=r(6061),d=r(345);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,d.cn)(l(),r),...s})});o.displayName=n.f.displayName},345:function(e,t,r){"use strict";r.d(t,{cn:function(){return cn}});var a=r(7042),s=r(4769);function cn(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[621,41,140,971,472,744],function(){return e(e.s=2369)}),_N_E=e.O()}]);